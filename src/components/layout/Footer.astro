---
import Github from '@/assets/icons/github.svg';
import Light from '@/assets/icons/theme/light.svg';
import Dark from '@/assets/icons/theme/dark.svg';

const year = new Date().getFullYear();
---

<div
    class="mt-8 flex flex-col justify-between gap-2 text-sm text-stone-500 sm:mt-16 sm:flex-row sm:items-center dark:text-stone-400"
>
    <span>Â© {year} Freddy Snow</span>
    <div class="flex flex-row gap-2">
        <a
            href="https://github.com/fjsnow/fjsn.io"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Github repository"
            class="relative flex h-6 w-6 cursor-pointer items-center justify-center gap-2 rounded-sm text-stone-500 hover:bg-stone-200 hover:text-stone-700 dark:text-stone-400 dark:hover:bg-stone-800 dark:hover:text-stone-300"
        >
            <Github class="h-4 w-4" aria-label="Github" />
        </a>
        <div
            class="js-only group relative h-6 w-6 cursor-pointer gap-2 rounded-sm hover:bg-stone-200 dark:hover:bg-stone-800"
            id="theme-toggle"
        >
            <Light
                class="absolute top-1 left-1 z-10 block h-4 w-4 text-stone-500 group-hover:text-stone-700 dark:hidden"
                aria-label="Enable dark mode"
            />
            <Dark
                class="absolute top-1 left-1 z-10 hidden h-4 w-4 text-stone-400 group-hover:text-stone-300 dark:block"
                aria-label="Enable light mode"
            />
        </div>
    </div>
</div>
<script>
    const toggle = () => {
        const theme =
            localStorage.getItem('theme') ||
            (window.matchMedia('(prefers-color-scheme: dark)').matches
                ? 'dark'
                : 'light');

        let next = theme === 'light' ? 'dark' : 'light';
        localStorage.setItem('theme', next);
        document.documentElement.setAttribute('data-theme', next);
    };

    const themeToggle = document.getElementById('theme-toggle')!;
    themeToggle.addEventListener('click', toggle);
</script>
