---
import Section from './Section.astro';
import Post from './Post.astro';
import type { MDPost } from '@/lib/post';

const posts = (
    Object.values(
        import.meta.glob('@/pages/posts/*.md', { eager: true })
    ) as MDPost[]
).filter((post) => post.frontmatter.listed !== false);
---

<Section title="posts">
    {
        posts.length > 0 ? (
            <div class="flex flex-col gap-4">
                {posts.map((post) => (
                    <Post post={post} />
                ))}
            </div>
        ) : (
            <h1 class="mt-2 text-center text-sm text-stone-400 italic">
                no posts.
            </h1>
        )
    }
</Section>
