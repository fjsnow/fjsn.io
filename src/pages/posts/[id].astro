---
import { getCollection, render } from 'astro:content';

export async function getStaticPaths() {
    const posts = await getCollection('posts');

    return posts.map((post) => ({
        params: { id: post.id },
        props: { post },
    }));
}

import Left from '@/assets/icons/left.svg';

import Root from '@/layouts/Root.astro';
import Header from '@/components/post/Header.astro';

const { post } = Astro.props;
const { Content } = await render(post);
---

<Root>
    <div class="flex flex-col gap-6">
        <a
            href="/"
            class="flex flex-row items-center gap-2 text-sm text-stone-700 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-300"
        >
	    <Left class="h-3 w-3" aria-hidden/>
            <span>back</span>
        </a>
        <Header post={post} />
        <div class="prose prose-sm prose-light dark:prose-dark max-w-none">
            <Content />
        </div>
    </div>
</Root>
